# 分布式 consul 入门

## 什么是 consul

Consul 是一个 service mesh 解决方案，它提供了一个功能齐全的控制界面，具有服务发现，配置和分段功能。

这些特性中的每一个都可以根据需要单独使用，也可以一起用于构建全服务 service mesh。

Consul 需要一个数据平面，并支持代理和本地集成模型。Consul 和一个简单的内置代理集成，这样可以实现开箱即用，同时也支持第三方代理集成，例如 Envoy。

## Consul 提供什么特性

Consul 的关键特性有如下几点：

- 服务发现：Consul 的客户端可以注册一个服务，比如 api 或 mysql，其他客户端可以使用 Consul 来发现给定服务的提供者。使用 DNS 或 HTTP，应用程序可以很容易地找到它们所依赖的服务。

- 健康检查：Consul 客户端可以提供任意数量的运行状况检查，要么与给定的服务相关（web 服务器是否返回 200 OK），要么与本地节点相关（内存利用率是否低于
  90%）。操作员可以使用此信息监视集群运行状况，服务发现组件也可以使用此信息将通信路由到健康的主机。

- KV 存储：应用程序可以将 Consul 的分层 key/value 值存储用于任何目的，包括动态配置，特性标记，协调，领导人选举等。简单的 HTTP API 使这个功能易于使用。

- 安全服务通信：Consul 可以为服务生成和分发 TLS 证书，以建立相互 TLS 连接。Intention 可用于定义允许哪些服务进行通信。Intention
  可以很容易地管理服务分段，支持实时更改服务分段，而不是使用复杂的网络拓扑和静态防火墙规则。

- 多数据中心：Consul 支持多个开箱即用的数据中心。这意味着 Consul 的用户不必担心构建额外的抽象层来扩展到多个区域。



