# mysql InnoDB 主从复制

复制允许将来自 Mysql 服务器（称为源）的数据复制到一个或多个 Mysql 服务器（称为副本）。默认情况下，复制是异步的；复制副本无需永久连接即可从源接收更新。根据配置的不同，你可以复制数据库中的所有数据库，选定的数据库，甚至选定表。

Mysql 中复制的优点包括：

- 横向扩展方案：在多个副本之间分散负载以提高性能。在这个环境中，所有写入和更新都必须在源服务器上进行。但是，读取可能发生在一个或多个副本上。此模型可以提高写操作的性能（因为源专用于更新），同时在越来越多的副本中显著提高读取速度。
  
- 数据安全性：由于复制副本可以暂停复制过程，因此可以在复制副本上运行备份服务，而不会损坏响应的源数据
  
- 数据分析：可以在源上创建在线数据，而数据分析可以在副本上进行，而不会影响源的性能
  
- 远程数据分发：你可以使用复制创建的本地副本供远程站点使用，而无需永久访问源

Mysql 8.0 支持不同的复制方法：

- 传统的方法基于从源的 binlog 复制事件，并要求在源和副本之间同步日志文件及其位置。
  
- 基于全局事务标识符（global transaction identifier）（GTID）的较新方法是事务性的，因此不需要处理日志文件或这些文件中的位置，这大大简化了许多常见的复制任务。使用 GTID 的复制可以保证源和副本之间的一致性，能够保证源上提交的事务也应用于副本。

Mysql 中的复制支持不同类型的同步：

- 最初的同步类型是单向异步复制，其中一台服务器充当源，而一台或多台服务器充当副本，
  
- NDC 集群支持同步复制
  
- 除了内置的异步复制外，还支持半同步复制，对于半同步复制，直到至少一个副本确认它已经接收到并记录了事务之前，源执行的事务提交不会收到会话的返回
  
- Mysql8.0 还支持延迟复制，使得副本故意落后于源至少一段指定的时间