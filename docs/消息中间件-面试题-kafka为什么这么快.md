# kafka 面试题：为什么 kafka 这么快？

是什么让 Apache Kafka 成为实时数据处理的首选平台呢？除了 Kafka 提供的所有其他优势外，速度是最重要的优势之一。让我们看看 Kafka 是如何被设计成如此之快的：

1. 低延迟 I/O：有两个可用于存储和缓存数据的设备：随机访问内存（RAM）和磁盘。

    - 实现低延迟传递消息的传统方法是使用 RAM。与磁盘相比，RAM 更受欢迎，因为磁盘具有较高的寻道时间，速度较慢。

    - RAM 的缺点是当流入系统的数据约为 10-500GB/s 甚至更大时，使用 RAM 的成本可能会很高。

因此，Kafka 依赖文件系统来存储和缓存消息。虽然它使用磁盘而不是 RAM，但它仍然能够实现低延迟。

2. Kafka 避免了寻道时间（Seek Time）：Kafka 巧妙地使用了一种称为顺序 I/O 的概念来避免寻道时间。

    - 它使用一个名为"log"的数据结构，这是一个仅添加（append）的记录序列，按时间排序。日志实际上是一个队列，生产者可以在末尾追加日志，订阅者可以通过维护指针自行处理消息。

    - 发布的第一条记录的偏移量为 0，第二条记录偏移量为 1，依此类推。

    - 消费者通过访问偏移量指定的位置来使用数据。消费者定期将位置保存在日志中。

    - 这也使得 Kafka 成为一个容错系统，因为如果当前消费者失败，存储的偏移量可以被其他消费者用来读取新纪录。这种方法消除了磁盘寻道的逻辑，因为数据以如下的方式呈现：

![消息中间件-面试题-kafka为什么这么快-存储结构.png](https://cnymw.github.io/GolangStudy/docs/img/消息中间件-面试题-kafka为什么这么快-存储结构.png)

## 参考资料

- [Why Apache Kafka is so Fast?](https://www.geeksforgeeks.org/why-apache-kafka-is-so-fast/)
