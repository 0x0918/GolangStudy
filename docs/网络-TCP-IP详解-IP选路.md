# TCP-IP 详解：IP 选路

下图是 IP 层处理过程的简单流程：

![IP 工作流程](https://cnymw.github.io/GolangStudy/docs/img/网络-TCP-IP详解-IP选路-IP工作流程.png)

其中的路由守护程序（daemon）是一个用户进程，在 unix 系统中，大多数守护程序都是路由程序和网关程序，它一般完成以下几件事情：

- 在主机上运行何种路由协议
- 如何在相邻路由器上交换选路信息
- 选路协议是如何工作的

IP 层进行的选路实际上是一种选路机制，它搜索路由表并决定向哪个网络接口发送分组。

路由守护程序则提供选路策略，来决定把哪些路由放入路由表。

## 选路的原理

IP 搜索路由表的几个步骤：

1. 搜索匹配的主机地址
2. 搜索匹配的网络地址
3. 搜索默认表项（默认表项一般在路由表中被指定为一个网络表项，其网络号为0）

## 动态选路

