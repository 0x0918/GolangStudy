# Elasticsearch 基础知识

## 概念

### 索引词 term

在 Elasticsearch 中索引词 term 是一个能够被索引的精确值。

foo，Foo，FOO 几个单词是不同的索引词。索引词是可以通过查询进行准确的搜索。

### 文本 text

文本是一段普通的非结构化文字。通常，文本会被分析成一个个索引词，存储在 Elasticsearch 的索引库中。

为了让文本能够进行搜索，文本字段需要事先进行分析。当对文本中的关键词进行查询的时候，搜索引擎应该根据搜索条件搜索出原文本。

### 分析 analysis

分析是将文本转换为索引词的过程，分析的结果依赖于分词器。

比如，FOO BAR，Foo-Bar 和 foo bar 这几个单词有可能会被分析成相同的索引词 foo 和 bar。

### 集群 cluster

集群由一个或多个节点组成，对外提供服务，对外提供索引和搜索功能。

当需要有多个集群的时候，要确保每个集群的名称不能重复，否则节点可能会加入错误的集群。注意，一个节点只能加入一个集群。

此外，你还可以拥有多个独立的集群，每个集群都有不同的集群名称。

### 节点 node

一个节点是一个逻辑上独立的服务，它是集群的一部分，可以存储数据，并参与集群的索引和搜索功能。

### 路由 routing

当存储一个文档的时候，它会存储在唯一的主分片中，是通过散列值进行选择。默认情况下，这个值是由文档的 ID 生成。

如果文档有一个指定的父文档，则从父文档 ID 中生成，该值可以在存储文档的时候进行修改。

### 分片 shard

分片是单个 Lucene 实例，索引是指向主分片和副本分片的逻辑空间。

一个索引可以存储很大的数据，这些空间可以超过一个节点的物理存储限制。仅从单个节点搜索可能会很慢，为了解决这个问题，Elasticsearch 将索引分解成多个分片。每个分片本身是一个全功能的，独立的单元，可以托管在集群中的任何节点。

### 主分片 primary shard

每个文档都存储在一个分片中，当你存储一个文档的时候，系统会首先存储在主分片中，然后会复制到不同的副本中。

默认情况下，一个索引有 5 个主分片。

